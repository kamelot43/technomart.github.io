var link=document.getElementById("open-form"),popupCart=document.querySelector(".popup--cart"),linksBuy=document.querySelectorAll(".btn-product--buy"),closeBuy=popupCart.querySelector(".popup__close--cart"),continueBuy=popupCart.querySelector(".continue");if(link){var popupForm=document.querySelector(".popup--form"),login=popupForm.querySelector("[name=popup-name]"),email=popupForm.querySelector("[name=popup-mail]"),storage=localStorage.getItem("login"),form=popupForm.querySelector("form"),closeForm=popupForm.querySelector(".popup__close--form"),mapLink=document.querySelector(".delivery__map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-map__close");link.addEventListener("click",function(o){o.preventDefault(),popupForm.classList.add("modal-show"),storage?(login.value=storage,email.focus()):login.focus()}),closeForm.addEventListener("click",function(o){o.preventDefault(),popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error")}),form.addEventListener("submit",function(o){login.value&&email.value?localStorage.setItem("login",login.value):(o.preventDefault(),popupForm.classList.remove("modal-error"),popupForm.offsetWidth=popupForm.offsetWidth,popupForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(o){27===o.keyCode&&popupForm.classList.contains("modal-show")&&(popupForm.classList.remove("modal-show"),popupForm.classList.remove("modal-error"))}),mapLink.addEventListener("click",function(o){o.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(o){o.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(o){27===o.keyCode&&mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show")})}for(var i=0;i<linksBuy.length;i++)linksBuy[i].addEventListener("click",function(o){o.preventDefault(),popupCart.classList.add("modal-show")});closeBuy.addEventListener("click",function(o){o.preventDefault(),popupCart.classList.remove("modal-show")}),continueBuy.addEventListener("click",function(o){o.preventDefault(),popupCart.classList.remove("modal-show")}),window.addEventListener("keydown",function(o){27===o.keyCode&&popupCart.classList.contains("modal-show")&&popupCart.classList.remove("modal-show")});
